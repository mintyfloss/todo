/*
	UIZE JAVASCRIPT FRAMEWORK 2011-04-01

	http://www.uize.com/reference/Uize.Widget.Picker.SelectorOld.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Picker.SelectorOld',required:['Uize.Widget.Options','Uize.Widget.SelectorOption','Uize.Util.Coupler'],builder:function(e_a){var e_b=true,e_c=false,e_d=null,e_e,e_f={nearest:'round',up:'ceil',down:'floor'};var e_g=e_a.subclass(e_d,function(){var e_h=this,e_i=e_h.addChild('options',Uize.Widget.Options,{optionWidgetClass:Uize.Widget.SelectorOption,optionWidgetProperties:{allowClickWhenSelected:e_b},html:e_b,built:e_c});new Uize.Util.Coupler({instances:[e_h,e_i],properties:['tentativeValue','value','values']});e_i.wire('Click',function(){e_h.set({isDirty:e_b})});e_h.wire('Changed.value',function(){e_h.e_j();e_h.e_k();e_h.set({e_l:e_h.e_m,tentativeValue:e_h.get('value')});});}),e_n=e_g.prototype;e_n.e_j=function(){var e_h=this,e_o=e_h.get('valueConformer');e_o&&e_h.set({value:e_o(e_h.get('value'))});};e_n.e_p=function(e_q){var e_h=this,e_r=e_h.e_r;return e_r.length?Uize.findRecordNo(e_r,{name:e_q!=e_e?e_q:e_h.get('value')}): -1;};e_n.e_k=function(){this.set({e_m:this.e_p()})};
e_n.getValueObject=function(e_m){var e_h=this;return((e_m=e_m!=e_e?e_m:e_h.e_p(e_h.get('value')))> -1?e_h.e_r[e_m]:e_d);};e_n.wireUi=function(){var e_h=this;if(!e_h.isWired){e_h.e_k();e_a.prototype.wireUi.call(e_h);}};e_g.registerProperties({e_s:{name:'isMultiSelect',value:e_c},e_l:{name:'tentativeValueNo',value:-1},e_t:'valueConformerPreset',e_u:{name:'valueMap',value:{}},e_m:{name:'valueNo',value:-1},e_r:{name:'values',onChange:e_n.e_j,value:[]}});e_g.set({valueConformer:function(e_q){var e_h=this,e_t=e_h.e_t,e_v=e_q;if(e_t){var e_w=e_t.type,e_x=e_t.properties||{};if(e_w=='inValues'){var e_r=e_h.e_r;e_v=e_h.e_p(e_q)> -1?e_q:(e_r.length?e_r[0].name:e_d);}else if(e_w=='increment'){var e_y=e_x.increment,e_z=e_x.roundDirection;if(e_y&&e_y!=1){e_x.roundDirection=e_z=e_z&&e_f[e_z]?e_z:'nearest';function e_A(e_q){return Math.round(e_q*Math.pow(10,14))/Math.pow(10,14)}e_v=Uize.isNumber(+e_q)?(e_A(Math[e_f[e_z]](e_A(e_q/e_y))*e_y)):e_q;}}}return e_v;}});return e_g;}});