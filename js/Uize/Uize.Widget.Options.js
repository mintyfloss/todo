/*
	UIZE JAVASCRIPT FRAMEWORK 2011-04-01

	http://www.uize.com/reference/Uize.Widget.Options.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Options',required:'Uize.Widget.Button',builder:function(c_a){var c_b=null,c_c;var c_d=c_a.subclass(c_b,function(){this.c_e= -1;this.c_f=0;}),c_g=c_d.prototype;c_g.c_h=function(){var c_i=this;c_i.set({c_j:c_i.getValueNoFromValue(c_i.c_k)});c_i.updateUi();};c_g.forAll=function(c_l){for(var c_j= -1,c_m=this.c_n.length,c_o=this.children;++c_j<c_m;)if(c_l(c_o['option'+c_j],c_j)===false)break;;};c_g.getValueNoFromValue=function(c_k){var c_n=this.c_n;return(c_n.length?(typeof c_n[0]=='object'?Uize.findRecordNo(c_n,{name:c_k}):Uize.indexIn(c_n,c_k,false,false)): -1);};c_g.getOptionProperties=function(c_j,c_p){return c_b};c_g.updateUi=function(){var c_i=this;if(c_i.isWired&&c_i.c_j!=c_i.c_e){function c_q(c_r,c_s){c_r>=0&&Uize.callOn(c_i.children['option'+c_r],'set',[{selected:c_s}]);}c_q(c_i.c_e,false);c_q(c_i.c_e=c_i.c_j,true);}};c_g.wireUi=function(){var c_i=this;if(!c_i.isWired){c_i.c_j= -1;var c_t=c_i.c_t||Uize.Widget.Button,c_u=c_i.c_u,c_n=c_i.c_n,c_m=c_i.c_f=c_n.length,c_v,c_w;
function c_x(){c_v=c_b;c_i.set({c_y:c_i.c_k,c_z:c_i.c_j});}function c_A(){c_v&&clearTimeout(c_v);c_w&&clearTimeout(c_w);}function c_B(c_j){var c_p=c_n[c_j],c_k=((typeof c_p=='object'&&c_p)||(c_p={name:c_p})).name;function c_C(){c_i.set(c_i.c_D?{c_k:c_k}:{c_y:c_k,c_z:c_j});}c_i.addChild('option'+c_j,c_t,Uize.copyInto({},c_u,c_i.getOptionProperties(c_j,c_p))).wire('*',function(c_E){if(c_E.name=='Click'){c_i.fire({name:'Before Value Change',value:c_k,valueNo:c_j}).cancel||c_i.set({c_k:c_k});c_i.fire(c_E);}else if(c_E.name=='Over'){c_A();c_i.c_F?(c_w=setTimeout(c_C,c_i.c_F)):c_C();}else if(c_E.name=='Out'){c_A();c_v=setTimeout(c_x,250);}c_i.fire({name:'Option Event',value:c_k,childEvent:c_E});});}for(var c_j= -1;++c_j<c_m;)c_B(c_j);if(c_m){var c_G=c_i.getNode();if(c_G){for(var c_H= -1,c_I,c_J,c_K,c_L=c_G.childNodes||[],c_M=c_L.length,c_o=c_i.children,c_N=c_i.get('idPrefix'),c_O=c_N.length;++c_H<c_M;){if((c_J=(c_I=c_L[c_H]).id)&& !c_J.indexOf(c_N)&&(c_K=c_o[c_J.slice(c_O+1)]))
c_K.set({nodeMap:{'':c_I,shell:c_b,bed:c_b}});}}}c_a.prototype.wireUi.call(c_i);c_i.c_h();}};c_d.registerProperties({c_t:'optionWidgetClass',c_u:'optionWidgetProperties',c_D:'setValueOnMouseover',c_F:{name:'tentativeRestTime',value:0},c_y:{name:'tentativeValue',value:c_b},c_z:{name:'tentativeValueNo',value:-1},c_k:{name:'value',onChange:function(){var c_i=this;c_i.c_h();c_i.set({c_z:c_i.c_j,c_y:c_i.c_k});},value:c_b},c_j:{name:'valueNo',value:-1},c_n:{name:'values',onChange:function(){var c_i=this;if(c_i.isWired){for(var c_j= -1,c_f=c_i.c_f||0;++c_j<c_f;)c_i.removeChild('option'+c_j);c_i.unwireUi();c_i.get('html')!=c_c&&c_i.set({built:false});c_i.insertOrWireUi();}},value:[]}});return c_d;}});