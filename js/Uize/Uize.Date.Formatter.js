/*
	UIZE JAVASCRIPT FRAMEWORK 2011-04-01

	http://www.uize.com/reference/Uize.Date.Formatter.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Date.Formatter',builder:function(){var _a=function(){},_b=Uize.Date;var _c,_d={YYYY:'\\d{4}',YY:'\\d\\d',MM:'1[0-2]|0[1-9]',monthNo:'1[0-2]|0?[1-9]',DD:'30|31|[1-2]\\d|0[1-9]',dayNo:'30|31|[1-2]\\d|0?[1-9]',dayNoSuffix:_b.dayNoSuffixes.join('|'),hh:'[0-1]\\d|2[0-3]',h12:'1[0-2]|0?[1-9]',hh12:'1[0-2]|0[1-9]',mm:'[0-5]\\d',minutes:'[0-5]?\\d',ss:'[0-5]\\d',seconds:'[0-5]?\\d',zzz:'\\d{3}',milliseconds:'\\d{1,3}',ampm:'am|pm'},_e={monthName:1,shortMonthName:1,dayName:1,shortDayName:1},_f=String.fromCharCode(7);function _g(_h,_i){_i=_i.toLowerCase();for(var _j= -1,_k=_h.length;++_j<_k;)if(_i==_h[_j].toLowerCase())return _j;return-1;}_a.format=_a.toPretty=_b.format;_a.parse=function(_l,_m){var _n;if(typeof _l=='object'&&_l&& !(_l instanceof Date))_l=_l.valueOf();if(_l instanceof Date)return _l;if(_l==null||_l=='')return;if(typeof _l=='number')return new Date(_l);if(!_m)return _b.resolve(_l);for(_n in _e)_d[_n]=null;if(!_c){var _o=[];for(_n in _d)_o.push(_n);
_c=new RegExp('\\{('+_o.join('|')+')\\}','g');}var _p=[],_q=0,_r=new RegExp(Uize.escapeRegExpLiteral(_m.replace(_c,function(_s,_n){_p.push(_n);return _f;})).replace(/\s+/g,'\\s+').replace(/\x07/g,function(){return('\\s*('+(_d[_n=_p[_q++]]||(_d[_n]=_b[_n+'s'].join('|')))+')\\s*');}),'i'),_t=(_l+'').match(_r);if(_t){var _u=0,_v=1,_w=1,_x,_y=0,_z=0,_A=0,_B=0,_C=false;for(var _D=0,_E=_t.length;++_D<_E;){var _F=_t[_D];switch(_p[_D-1]){case'YYYY':_u= +_F;break;case'YY':_u=1900+ +_F;break;case'MM':case'monthNo':_v= +_F;break;case'monthName':_v=_g(_b.monthNames,_F)+1;break;case'shortMonthName':_v=_g(_b.shortMonthNames,_F)+1;break;case'DD':case'dayNo':_w= +_F;break;case'hh':_x= +_F;break;case'h12':case'hh12':_y= +_F;break;case'mm':case'minutes':_z= +_F;break;case'ss':case'seconds':_A= +_F;break;case'zzz':case'milliseconds':_B= +_F;case'ampm':_C=/^pm$/i.test(_F)}}return _b(_u,_v,_w,_x!==undefined?_x:_y*(_y!=12)+_C*12,_z,_A,_B);}};return _a;}});