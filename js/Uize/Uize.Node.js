/*
	UIZE JAVASCRIPT FRAMEWORK 2011-04-01

	http://www.uize.com/reference/Uize.Node.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Node',builder:function(){var _a=function(){},_b,_c='string',_d='object',_e='function',_f=true,_g=false,_h=null,_i=typeof navigator!='undefined',_j=_i?navigator:{userAgent:'',appName:''},_k=_j.userAgent.toLowerCase(),_l=_j.appName=='Microsoft Internet Explorer',_m=_k.indexOf('applewebkit')> -1,_n=_k.indexOf('gecko')> -1,_o=_k.indexOf('opera')> -1,_p=_n||_o,_q='hidden',_r=Uize.copyInto;var _s=_a._s=function(_t){_u.clientX=_t.clientX;_u.clientY=_t.clientY;_u.pageX=_t.pageX;_u.pageY=_t.pageY;};function _v(_w){var _x=document.getElementById(_w);return(!_l||(_x&&_x.id==_w))?_x:_h;}function _y(){return document[_m?'body':'documentElement'];}function _z(_A){var _B=(_A=_A+'').slice(_A.indexOf('(')+1,_A.indexOf(')'));return Function.apply({},(_B?_B.split(','):[]).concat(_A.slice(_A.indexOf('{')+1,_A.lastIndexOf('}'))));}function _C(_D){if(_D.charCodeAt(0)==111&&_D.charCodeAt(1)==110)_D=_D.slice(2);return(_D.charCodeAt(_D.length-1)==41&&_a.VirtualEvent?_a.VirtualEvent.resolve(_D):_D);}
function _E(_F,_G){for(var _H= -1,_x={},_I=Math.min(_F.length,_G.length);++_H<_I;)_x[_F[_H]]=_G[_H];return _x;}var _J=_a._J={},_K={},_L=0,_M={string:1,number:1,boolean:1},_u={clientX:0,clientY:0,pageX:0,pageY:0};var _N='table-',_O=_N+'row',_P=_N+'cell',_Q=_r({SPAN:'inline',THEAD:_N+'header-group',TFOOT:_N+'footer-group',LI:'list-item'},_l&&typeof DOMImplementation=='undefined'?_h:{TABLE:'table',TR:_O,TH:_P,TD:_P,TBODY:_O+'-group',COLGROUP:_N+'column-group',COL:_N+'column',CAPTION:_N+'caption'});_a.display=function(_R,_S){_S=_S===_b|| !!_S;_T(_R,function(_U){_U.style.display=_S?(_Q[_U.tagName]||'block'):'none';});};var _T=_a.doForAll=function(_R,_A,_V,_W){if(typeof _R==_c)_R=_X(_R,_V,_W);if(_R!=_b){if(_Y(_R)){_A(_R);}else{var _Z=typeof _R;if((_Z==_d||_Z==_e)&&typeof _R.length=='number'){for(var _0= -1,_1=_R.length;++_0<_1;)_T(_R[_0],_A,_V,_W);}else if(_Z==_d){for(var _2 in _R)_T(_R[_2],_A,_V,_W);}}}};var _3=_a.doRectanglesOverlap=function(_4,_5,_6,_7,_8,_9,_ba,_bb){return(_6-1+ +_4>=_8&&_ba-1+ +_8>=_4&&
_7-1+ +_5>=_9&&_bb-1+ +_9>=_5);};var _X=_a.getById=function(_U,_V,_W){if(typeof _U!=_c)return _U;var _x=_W?_W[_U]:_b;if(_x===_b){var _bc=_bd(_V,_U);(_x=_v(_bc))||(((_x=document.getElementsByName(_bc)).length<2)&&(_x=_x[0]||_h));if(_W)_W[_U]=_x;}return _x;};_a.find=function(_be){if(typeof _be!=_d|| !_be||typeof _be.length=='number'||_Y(_be))return _be;var _bf=document,_bg=[],_bh=_r({},_be),_bi='root'in _bh?_X(_bh.root):_bf;delete _bh.root;if(_bi){var _bj=_bh.tagName;if('id'in _bh&&_M[typeof _bh.id]){var _U=_v(_bh.id);_U&&_bg.push(_U);delete _bh.id;}else if('name'in _bh&&_M[typeof _bh.name]){_bg=_bf.getElementsByName(_bh.name);delete _bh.name;}else{var _bk=_M[typeof _bj];_bk&&delete _bh.tagName;_bg=_bi.getElementsByTagName(_bj&&_bk?_bj:'*');_bi=_h;}if(_bi==_bf)_bi=_h;if(!_bj||_bj=='*')delete _bh.tagName;}var _bl=_bg.length;for(var _bm in _bh)break;if(!_bl||(_bm==_b&& !_bi))return _bg;var _bn=[],_bo;for(var _bp= -1;++_bp<_bl;){var _U=_bg[_bp];if(_bo=_bi?_bq(_U,_bi):_f){for(var _br in _bh){var _bs=_U[_br],
_bt=_bh[_br],_bu=Uize.isFunction;if(!(_M[typeof _bt]?_bs==_bt:(_bt instanceof RegExp?_bt.test(_bs||''):(_bu(_bt)?_bt.call(_U,_bs):_f)))){_bo=_g;break;}}}_bo&&_bn.push(_U);}return _bn;};var _bv=_a.getCoords=function(_U){var _bw=0,_bx=0,_by=0,_bz=0,_bA=_f,_bB=_y(),_bC=_bD(window);function _bE(){_bw+=_bB.scrollLeft;_bx+=_bB.scrollTop;}if(_U==window){_bE();_by=_bC.width;_bz=_bC.height;}else if(_Y(_U=_X(_U))){_by=_U.offsetWidth;_bz=_U.offsetHeight;if(!(_by&&_bz)&&_U.tagName=='DIV'){for(var _bF=_U.childNodes,_bG=_bF.length;--_bG>=0;){if(_bF[_bG].nodeName.charAt(0)!='#'){var _bH=_bv(_bF[_bG]);if(_bH.width||_bH.height){_by=Math.max(_by,_bH.right-_bw+1);_bz=Math.max(_bz,_bH.bottom-_bx+1);}}}}function _bI(_U){return _bJ(_U,'display')=='none'||_bJ(_U,'visibility')==_q;}if(_U.tagName=='A'&&_U.childNodes.length==1&&_U.childNodes[0].tagName=='IMG')_U=_U.childNodes[0];var _bK=_bA= !_bI(_U),_bL=_U,_bM=_U;while(_bM.parentNode&&typeof _bM.parentNode!='unknown'){var _bN=_bM.offsetLeft||0,_bO=_bM.offsetTop||0,
_bP=_bM.offsetWidth,_bQ=_bM.offsetHeight;if(_bA&&_bI(_bM))_bA=_g;if(_bM==_bL){_bw+=_bN+(parseInt(_bJ(_bM,'borderLeftWidth'))||0);_bx+=_bO+(parseInt(_bJ(_bM,'borderTopWidth'))||0);_bL=_bM.offsetParent;_bJ(_bM,'position')=='fixed'&&_bE();}if(_bM!=_U&&_bM!=document.body&&_bM!=document.documentElement&&(_bM.scrollWidth>_bP||_bM.scrollHeight>_bQ)){_bw-=_bM.scrollLeft;_bx-=_bM.scrollTop;if(_l){_bw+=_bM.clientLeft;_bx+=_bM.clientTop;}if(_bA)_bA=_3(_bw,_bx,_by,_bz,_bN,_bO,_bP,_bQ);}_bM=_bM.parentNode;}if(_bA)_bA=_3(_bw,_bx,_by,_bz,_bB.scrollLeft,_bB.scrollTop,_bC.width,_bC.height);}return{x:_bw,y:_bx,width:_by,height:_bz,area:_by*_bz,left:_bw,top:_bx,right:_bw+_by-1,bottom:_bx+_bz-1,seen:_bA};};var _bD=_a.getDimensions=function(_U){if(_U==window){var _bB=document.documentElement;return{width:_bB.clientWidth||window.innerWidth||_bB.offsetWidth,height:_bB.clientHeight||window.innerHeight||_bB.offsetHeight};}else if(_U=_X(_U)){return{width:_U.offsetWidth||parseInt(_bJ(_U,'width'))||0,
height:_U.offsetHeight||parseInt(_bJ(_U,'height'))||0};}else{return{width:0,height:0};}};var _bR={borderColor:['border','Color'],borderWidth:['border','Width'],padding:1,margin:1},_bJ=_a.getStyle=function(_U,_bS){var _bT='';if(typeof _bS==_c){if(_U){var _bU=_l&&_bS=='opacity',_bV=document.defaultView,_bW=_bV&&_bV.getComputedStyle(_U,'');if(_bU)_bS='filter';if(_bW){if(!(_bT=_bW[_bS])){var _bX=_bR[_bS];if(_bX){var _bY=_bX[0]||_bS,_bZ=_bX[1]||'',_b0=_bW[_bY+'Top'+_bZ],_b1=_bW[_bY+'Right'+_bZ],_b2=_bW[_bY+'Bottom'+_bZ],_b3=_bW[_bY+'Left'+_bZ];_bT=_b0==_b1&&_b1==_b2&&_b2==_b3?_b3:_b0+' '+_b1+' '+_b2+' '+_b3;}}}else{var _b4=_U.currentStyle;_bT=_b4?_b4.getAttribute(_bS):_U.style[_bS];}if(_bU){var _b5=_bT.match(/alpha\s*\(\s*opacity\s*=([^\)]*)\)/i);_bT=_b5?_b5[1]/100:1;}}}else{_bT={};if(_U)for(_bS in _bS)_bT[_bS]=_bJ(_U,_bS);}return _bT;};var _b6=_a.getText=function(_U){var _b7='';if(_U=_X(_U)){function _b8(_U){if(typeof _U.innerText==_c){_b7+=_U.innerText.replace(/\r|\n|\r\n/g,'');
}else if(typeof _U.textContent==_c){_b7+=_U.textContent;}else{if(_U.nodeType==3)_b7+=_U.data;if(_U.childNodes){for(var _bG= -1,_bF=_U.childNodes,_b9=_bF.length;++_bG<_b9;)_b6(_bF[_bG]);}}}_b8(_U);}return _b7;};_a.getValue=function(_U){var _bT;if(_U=_X(_U)){if(_Y(_U)){var _ca=_U.tagName;if(_ca=='TEXTAREA'){_bT=_U.value;}else if(_ca=='INPUT'){_bT=_U.type=='checkbox'?_U.checked:_U.value;}else if(_ca=='SELECT'){if(_U.multiple){_bT=[];for(var _cb= -1,_cc=_U.options,_cd=_cc.length,_ce;++_cb<_cd;)(_ce=_cc[_cb]).selected&&_bT.push(_ce.value);}else{_bT=_U.value;}}else if(_ca=='IMG'){_bT=_U.src;}else{_bT=_U.innerHTML.replace(/<br\/?>/gi,'\n').replace(/&nbsp;/g,' ');}}else{_bT=(Uize.findRecord(_U,{tagName:'INPUT',type:'radio',checked:_f})||{}).value;}}return _bT;};_a.injectHtml=function(_R,_cf,_cg){var _ch,_ci,_cj,_ck,_cl,_cm;((_ch=_cg=='inner replace')||(_ci=_cg=='outer replace')||(_cj=_cg=='inner top')||(_ck=_cg=='outer top')||(_cl=_cg=='outer bottom')||(_cm=_f));_cf+='';_T(_R,function(_U){var _cn=_U.childNodes;
function _co(_cp){return _cp&&/<script/i.test(_cp);}function _cq(){return _co(_cf);}if((_ch||(!_cn.length&&(_cj||_cm)))&& !_cq()){_U.innerHTML=_cf;}else if(_ci&&_l&& !_cq()){_U.outerHTML=_cf;}else{if(_ch)_U.innerHTML='';var _cr=document.createElement('DIV');_cr.innerHTML=_cf;var _cs=_cj?_cn[0]:_cl?_U.nextSibling:_U,_ct=_cr.childNodes,_cu=_U.parentNode;function _cv(_U){if(_U.tagName=='SCRIPT'){var _cw=document.createElement('script');if(_U.id)_cw.id=_U.id;if(_U.type)_cw.type=_U.type;_cw.text=_U.text;if(_U.src)_cw.src=_U.src;_U.parentNode.replaceChild(_cw,_U);}else if(_co(_U.innerHTML)){for(var _bG= -1,_cn=_U.childNodes,_cx=_cn.length;++_bG<_cx;)_cv(_cn[_bG]);}}while(_ct.length){var _cy=_ct[0];if(_cm||_ch){_U.appendChild(_cy);}else if(_cj){_cs?_U.insertBefore(_cy,_cs):_U.appendChild(_cy);}else if(_ck||_ci){_cu.insertBefore(_cy,_cs);}else if(_cl){_cs?_cu.insertBefore(_cy,_cs):_cu.appendChild(_cy);}_cv(_cy);}_ci&&_cu.removeChild(_U);}});};var _Y=_a.isNode=function(_U){return!!(_U&&typeof _U==_d&&
(_U.getAttribute||_U.documentElement||(_U.self&&_U.self==_U)));};var _bq=_a.isOnNodeTree=function(_U,_cz){_U=_X(_U);_cz=_X(_cz);while(_U){if(_U==_cz)return _f;_U=_U.parentNode;}return _g;};var _bd=_a.joinIdPrefixAndNodeId=function(_V,_w){return(_V||'')+(_V&&_w?'-':'')+_w;};_a.remove=function(_R){_T(_R,function(_U){_U.parentNode.removeChild(_U)});};_a.setClipRect=function(_R,_b0,_b1,_b2,_b3){var _cA='rect('+_b0+'px, '+_b1+'px, '+_b2+'px, '+_b3+'px)';_T(_R,function(_U){_U.style.clip=_cA});};var _cB=['left','top','width','height'];_a.setCoords=function(_R,_cC){_cD(_R,typeof _cC.length=='number'?_E(_cB,_cC):_cC);};_a.centerInWindow=function(_R){var _cE=_bv(window);_T(_R,function(_U){var _cF=_bD(_U);_a.setCoords(_U,{left:_cE.x+((_cE.width-_cF.width)>>1),top:_cE.y+((_cE.height-_cF.height)>>1)});});};_a.getEventAbsPos=function(_cG){var _cH=(_cG||(_cG=_u)).targetTouches;if(_cH&&_cH.length)_cG=_cH[0];if(_cG.pageX!=_b){return{left:_cG.pageX,top:_cG.pageY};}else{var _bB=_y();return{left:_cG.clientX+_bB.scrollLeft,
top:_cG.clientY+_bB.scrollTop};}};var _cI=_a.setAbsPos=function(_R,_cJ,_cK){_cK=typeof _cK=='number'?{x:_cK,y:_cK}:(_cK||{x:0,y:0});var _bB=document[_m?'body':'documentElement'],_cL=_bD(window);_T(_R,function(_U){function _cM(_cN,_cO,_cP,_cQ){var _cR=_cJ[_cN],_cS=_cK[_cQ],_cT=_cR-_bB[_cO],_cU=_cS+_cF[_cP];return(_cR+(_cT+_cU>_cL[_cP]?Math.max(-_cU,-_cT):_cS));}var _cF=_bD(_U);_cD(_U,{left:_cM('left','scrollLeft','width','x'),top:_cM('top','scrollTop','height','y'),right:'auto',bottom:'auto'});});};_a.setAbsPosAdjacentTo=function(_R,_cV,_cW){_cV=_X(_cV);var _cX=_bv(_cV),_cY=_cX.width/2,_cZ=_cX.height/2,_c0=_cW=='x'? -1:1;if(!_cY&& !_cZ)_cX=_a.getEventAbsPos();_T(_R,function(_U){_cI(_U,{left:_cX.left+_cY,top:_cX.top+_cZ},{x:-_cY*_c0,y:_cZ*_c0});});};_a.setInnerHtml=function(_R,_cp){_cp+='';_T(_R,function(_U){_U.innerHTML=_cp});};var _c1={};_a.setOpacity=function(_R,_c2){_c1.opacity=_c2;_cD(_R,_c1);};_a.setProperties=function(_R,_be){_T(_R,function(_U){_r(_U,_be)});};var _cD=_a.setStyle=function(_R,_be){_T(_R,
function(_U){var _c3=_U.style,_c4;if(_l&&'opacity'in _be)_c3.filter=(_c4=Math.round(_be.opacity*100))<100?'alpha(opacity='+_c4+')':'';for(var _bS in _be)_c3[_bS]=(typeof(_c4=_be[_bS])==_d&&_c4?(_c4=_c4.valueOf()):_c4)!=_b?(typeof _c4=='number'&&_bS!='opacity'&&_bS!='zIndex'?Math.round(_c4)+'px':_c4+''):'';});};_a.setValue=function(_R,_bT){_bT+='';_T(_R,function(_U){var _ca=_U.tagName,_c5=_U.readOnly;if(_c5)_U.readOnly=_g;if(_ca=='TEXTAREA'){_U.value=_bT;}else if(_ca=='INPUT'){var _c6=_U.type;if(_c6=='text'||_c6==_q||_c6=='password'){_U.value=_bT;}else if(_c6=='checkbox'){_U.checked=_bT=='true';}else if(_c6=='radio'){_U.checked=_U.value==_bT;}}else if(_ca=='SELECT'){if(!_bT){_U.selectedIndex= -1;}else{var _cc=_U.options;if(_U.multiple&&(_bT=='*'||_bT.indexOf(',')> -1)){var _c7;if(_bT!='*'){_c7={};for(var _G=_bT.split(','),_H=_G.length;--_H>=0;)_c7[_G[_H]]=1;}for(var _cb=_cc.length,_ce;--_cb>=0;)(_ce=_cc[_cb]).selected= !_c7||_c7[_ce.value];}else{
_U.selectedIndex=Uize.findRecordNo(_cc,{value:_bT},_U.selectedIndex);}}}else if(_ca=='IMG'){if(_bT)_U.src=_bT;}else{_ca=='PRE'&&_l?(_U.innerText=_bT):(_U.innerHTML=_bT.replace(/</g,'&lt;').replace(/\n/g,'<br/>'));}if(_c5)_U.readOnly=_c5;});};_a.show=function(_R,_c8){_cD(_R,{visibility:_c8||_c8===_b?'inherit':_q});};_a.showClickable=function(_R,_c9){_cD(_R,{cursor:_c9||_c9===_b?(_l?'hand':'pointer'):'default'});};var _da=_a.unwire=function(_R,_db,_dc,_dd){if(typeof _db==_d&&_db&& !_db.virtualDomEvent){for(var _D in _db)_da(_R,_D,_db[_D],_dc);}else{_a.unwireEventsByOwnerId(_dd,_R!==_b||_db!=_b||_dc!=_b?{node:_R,eventName:_db,handler:_dc}:_b);}};_a.unwireEventsByOwnerId=function(_de,_df){var _dg=_K[_de=_de||''];if(_dg){function _dh(_di){if(_di!==_h){var _dj=_df&&_df.eventName,_dk=_df&&_df.handler,_dl=_di||_dj||_dk;if(_dj&&_dj.charCodeAt)_dj=_C(_dj);for(var _dm=_dg.length;--_dm>=0;){var _dn=_dg[_dm],_do=_J[_dn],_U=_do._U,_D=_do._D;if(!_dl||((!_di||_di==(_do._dp||_U))&&(!_dj||_dj==_D)&&(!_dk||_dk==_do._dq))){
_dl&&_dg.splice(_dm,1);if(_do._dr){_a.unwireEventsByOwnerId(_do._dr)}else{try{_U==window?_ds.unwire(_D,_do._dt):_l?_U.detachEvent('on'+_D,_do._dt):_U.removeEventListener(_D,_do._dt,_g);}catch(_du){}}delete _J[_dn];}}(_dl&&_dg.length)||delete _K[_de];}}_df&&_df.node!==_b?_T(_df.node,_dh):_dh();}};var _dv=_z(function(_dn){return(function(_t){var _do=window.Uize&&Uize.Node._J[_dn];return _do&&_do._dq.call(_do._U,_t.windowEvent);});}),_dw=_z(function(_dn){return(function(_t){var _do=window.Uize&&Uize.Node._J[_dn];return _do&&_do._dq.call(_do._U,_t||window.event);});}),_dx={click:_dw,mouseover:_z(function(_dn){return(function(_t){var _do=window.Uize&&Uize.Node._J[_dn],_dy=(_t||(_t=window.event)).fromElement||_t.relatedTarget;if(_do){if(_dy){try{if(!_dy.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dy,_do._U))_dy=null;}catch(_du){_dy=null;}}if(!_dy){Uize.Node._s(_t);return _do._dq.call(_do._U,_t);}}});}),mouseout:_z(function(_dn){return(function(_t){var _do=window.Uize&&Uize.Node._J[_dn],
_dz=(_t||(_t=window.event)).toElement||_t.relatedTarget;if(_do){if(_dz){try{if(!_dz.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dz,_do._U))_dz=null;}catch(_du){_dz=null;}}if(!_dz)return _do._dq.call(_do._U,_t);}});}),mousedown:_dw,mouseup:_dw};_a.wire=function(_R,_D,_dq,_de){if(!_D)return;if(_de==_b)_de='';var _dA;if(_D.charCodeAt)_D=_C(_D);if(typeof _D==_d&& !(_dA= !!_D.virtualDomEvent)){_de=arguments[2]||'';for(var _t in _D)_a.wire(_R,_t,_D[_t],_de);return;}_T(_R,function(_U){var _ca=_U.tagName;(_K[_de]||(_K[_de]=[])).push(_L);var _dt=(_dA?_a.returnFalse:_U==window?_dv:_dx[_D]||_dw)(_L);var _do=_J[_L++]={_U:_U,_D:_D,_dq:_dq,_dt:_dt};if(_p&&_ca=='BODY'&&_D=='scroll'){_do._dp=_U;_U=_do._U=document;}if(_dt){var _dB='on'+_D;_U==window?_ds.wire(_D,_dt):_l?_U.attachEvent(_dB,_dt):_U.addEventListener(_D,_dt,_g);if(_ca=='A'&&(_D=='mousedown'||_D=='click')&& !_U[_dB])_U[_dB]=_a.returnFalse;}else if(_dA){_D.wire(_U,_dq,_do._dr=Uize.getGuid());}});};_a.returnFalse=new Function('return false');
_a.returnTrue=new Function('return true');_a.isIe=_l;_a.isSafari=_m;_a.isMozilla=_n;if(_i){_a.wire(document.documentElement,'mousemove',_s);var _ds=new Uize,_dC=setTimeout(function(){_ds.fire('load')},15000);function _dD(_dE){var _dF='on'+_dE,_dG=window[_dF]||_a.returnFalse;window[_dF]=function(_t){_dE=='load'&&clearTimeout(_dC);_dG.call(window,_t||(_t=window.event));_ds.fire({name:_dE,windowEvent:_t});};}for(var _dE in{focus:1,blur:1,load:1,beforeunload:1,unload:1,resize:1,scroll:1})_dD(_dE);;}return _a;}});