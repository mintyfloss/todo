/*
	UIZE JAVASCRIPT FRAMEWORK 2011-04-26

	http://www.uize.com/reference/Uize.Widget.Page.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Page',required:'Uize.Node',builder:function(c_a){var c_b=true,c_c=false,c_d,c_e=Uize.Node;var c_f=c_a.subclass(null,function(){c_f.xDeferredLinks&&this.wireDeferredLinks()}),c_g=c_f.prototype;function c_h(c_i){return(Uize.isFunction(c_i)&&c_i)||c_i.callback||Object;}c_g.c_j=function(c_k,c_l,c_m){var c_n=this;c_n.useDialog({component:c_n.c_o.component,widgetClassName:c_n.c_o.widgetClassName||'Uize.Widget.Dialog.Confirm',widgetProperties:{name:'confirmDialog',title:c_m.title||'',message:(c_m.message+'').replace(/\n/g,'<br/>'),mode:c_k,state:c_m.state||c_l,okText:c_m.okText||null,cancelText:c_m.cancelText||null},submitHandler:function(c_p){var c_q=c_m.callback||(c_p?c_m.yesHandler:c_m.noHandler);c_q&&c_q(c_p);}});};c_g.c_r=function(c_s){c_s=c_s||Object;var c_n=this,c_t=c_n.get('idPrefix'),c_u=window;function c_v(c_w,c_x){var c_y,c_z;for(var c_A in c_x)(typeof(c_y=c_w[c_A])=='object'&&typeof(c_z=c_x[c_A])=='object'&&c_y&&c_z)?c_v(c_y,c_z):(c_w[c_A]=c_x[c_A]);}var c_B={},c_C=c_c,
c_D='$'+c_t+'_',c_E=c_D.length,c_F;for(var c_A in c_u){if(c_A.charAt(0)=='$'&&c_A.substr(0,c_E)==c_D&&typeof(c_F=c_u[c_A])=='object'&&c_F&&c_F.widgetClass){c_C=c_b;for(var c_G= -1,c_H=c_B,c_I=c_A.substr(c_E).split('_'),c_J,c_K=c_I.length;++c_G<c_K;){var c_L=c_H[c_J=c_I[c_G]];if(c_G<c_K-1){c_H=(c_L||(c_L=c_H[c_J]={})).children||(c_L.children={});}else{c_L?c_v(c_L,c_F):(c_H[c_J]=c_F);c_u[c_A]=c_d;}}}}if(c_C){function c_M(c_N,c_O){function c_P(c_Q,c_R,c_S){var c_T=c_S.children,c_U=c_N(c_Q,c_R,c_S);c_T&&c_V(c_U,c_T);c_O&&c_O(c_U);}function c_V(c_Q,c_W){for(var c_R in c_W)c_P(c_Q,c_R,c_W[c_R]);}c_V(c_n,c_B);}var c_X={},c_Y=[];c_M(function(c_Q,c_R,c_S){var c_Z=c_S.widgetClass;if(c_Z&& !c_X[c_Z]){c_X[c_Z]=1;c_Y.push(c_Z);}});Uize.module({required:c_Y,builder:function(){c_n.set({children:c_B});c_M(function(c_Q,c_R,c_S){var c_U=c_Q.children[c_R];if(!c_U){var c_Z=eval(c_S.widgetClass||'Uize.Widget');c_U=c_R.charCodeAt(0)==36&&c_R.charCodeAt(1)==36?c_Z.spawn(c_S,c_Q):c_Q.addChild(c_R,c_Z);}return c_U;},
c_n.isWired&&function(c_U){Uize.callOn(c_U,'insertOrWireUi')});c_s();}});}else{c_s();}};c_g.loadHtmlIntoNode=function(c_0,c_1,c_2){var c_n=this,c_3=c_0.rootNodeId,c_s=c_h(c_2),c_4={callback:function(c_5){var c_6=document.body,c_7=c_0.node!=undefined?c_n.getNode(c_0.node):(c_3?c_e.getById(c_3+'-shell'):c_8)||c_6;c_e.injectHtml(c_7,c_5,c_0.injectMode||(c_7==c_6?'inner bottom':'inner replace'));c_n.c_r(c_s);}};c_0.alwaysReplace===c_c&&c_3&&c_e.getById(c_3)?c_s():c_n.loadHtml(c_1,typeof c_2=='object'&&c_2?Uize.copyInto({},c_2,c_4):c_4);};c_g.performAjax=function(){};c_g.useDialog=function(c_m){var c_n=this,c_9=Uize.copyInto({},c_n.c_ba,c_m.widgetProperties),c_bb=c_9.parent||c_n,c_bc=c_9.name,c_bd=c_bb.children[c_bc],c_be=c_m.component,c_bf;if(c_be){var c_3=c_9.idPrefix||(c_bb.get('idPrefix')+'_'+c_bc);c_bf={name:c_be.name,rootNodeId:c_3,params:Uize.copyInto({idPrefix:c_3},c_be.params)};}function c_bg(c_bh){var c_bi=c_n.get('productType');c_bd.fire({name:'Track Event',extra:c_bh+(c_bi?(' ('+c_bi+')'):''),
bubble:c_b});}function c_bj(c_bk){setTimeout(function(){function c_bl(c_bm,c_bn){var c_q=c_m[c_bm];c_q&&c_q.apply(0,c_bn);}function c_bo(c_bp){var c_bn=[c_bp];c_bl(c_bp.name.toLowerCase()+'Handler',c_bn);c_bl('dismissHandler',c_bn);}c_bd.unwire(c_bd.eventHandlersForUseDialog||{});c_bd.eventHandlersForUseDialog={'Submission Complete':function(c_bp){c_bl('submitHandler',[c_bp.result,c_bp])},Close:c_bo,Cancel:c_bo};c_bd.wire(c_bd.eventHandlersForUseDialog);c_bd.set(c_9);c_bd.set({shown:c_b});c_bg(c_bk);},0);}if(c_bd&&(c_bd.componentProfile==c_bf||Uize.Data.identical(c_bd.componentProfile,c_bf))){c_bj('subsequent');}else{var c_bq=c_bf&& !!c_bd;if(c_bq){c_bd.removeUi();c_bb.removeChild(c_bc);}function c_br(){var c_bs=c_m.widgetClassName;Uize.module({required:c_bs,builder:function(){(c_bd=c_bb.children[c_bc])?c_bd.set(c_9):(c_bd=c_bb.addChild(c_bc,eval(c_bs),c_9));c_bd.componentProfile=c_bf;c_bd.wire(c_m.widgetEventHandlers);c_bd.insertOrWireUi();c_bj(c_bq?'refetched':'initial');}});}c_bf?c_n.loadHtmlIntoNode({
rootNodeId:c_bf.rootNodeId,injectMode:'inner bottom',alwaysReplace:c_c},Uize.copyInto({cp:c_bf.name},c_bf.params),{cache:'memory',callback:c_br}):c_br();}};c_g.wireUi=function(){var c_n=this;if(!c_n.isWired){c_n.c_r();c_a.prototype.wireUi.call(c_n);}};var c_bt={yes:1,on:1,1:1,'true':1};c_f.launchPopup=c_g.launchPopup=function(c_m){if(!c_m)c_m={};if(c_m.width==c_d)c_m.width=850;if(c_m.height==c_d)c_m.height=600;var c_bu=window.screen;if(c_m.left==c_d)c_m.left=Math.max((c_bu.width-c_m.width-10)>>1,0);if(c_m.top==c_d)c_m.top=Math.max((c_bu.height-c_m.height-40)>>1,0);function c_bv(c_bw){return c_bw+'='+c_m[c_bw];}function c_bx(c_bw,c_by){return(c_bw+'='+(c_bt[c_m[c_bw]==c_d?c_by:c_m[c_bw]+'']?'yes':'no'));}var c_bz=window.open(c_m.url||'',c_m.name==c_d?'popupWindow':c_m.name,[c_bv('width'),c_bv('height'),c_bv('top'),c_bv('left'),c_bx('toolbar',0),c_bx('location',0),c_bx('directories',0),c_bx('status',0),c_bx('menubar',0),c_bx('scrollbars',1),c_bx('resizable',1)].join(','));c_bz&&c_bz.focus();return c_bz;};
c_f.registerProperties({c_o:{name:'confirmDialog',value:{}},c_ba:'dialogProperties'});c_f.set({idPrefix:'page'});c_g.loadHtml=function(c_1,c_i){c_h(c_i)('');};c_g.showConfirm=function(c_m){this.c_j('confirm','confirm',c_m);};c_g.showInform=function(c_m){this.c_j('alert','info',c_m);};return c_f;}});